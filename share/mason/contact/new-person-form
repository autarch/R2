<&| /lib/filter/yui/row.mas &>
<div id="summary">
  <h1><% $title %></h1>
</div>

<&| /lib/filter/fill-in-form.mas &>
<form class="JS-standard-form" action="/user/authentication" method="post">

  <fieldset>
    <legend>The Basics</legend>

    <div class="form-item">
      <label class="for-field" for="salutation">Salutation:</label>
      <input type="text" class="text narrow" name="salutation" id="salutation" />
      <div class="help-text">
        <p>
          Mr., Ms., Dr., etc.
        </p>
      </div>
    </div>

    <div class="form-item">
      <label class="for-field" for="first_name">First name:</label>
      <input type="text" class="text" name="first_name" id="first_name" />
    </div>

    <div class="form-item">
      <label class="for-field" for="middle_name">Middle name:</label>
      <input type="text" class="text" name="middle_name" id="middle_name" />
    </div>

    <div class="form-item">
      <label class="for-field" for="last_name">Last name:</label>
      <input type="text" class="text" name="last_name" id="last_name" />
    </div>

    <div class="form-item">
      <label class="for-field" for="suffix">Name suffix:</label>
      <input type="text" class="text narrow" name="suffix" id="suffix" />
      <div class="help-text">
        <p>
          Jr., Esq., etc.
        </p>
      </div>
    </div>

    <div class="form-item">
      <label class="for-field" for="birth_date">Birth date:</label>
      <input type="text" class="text narrow date" name="birth_date" id="birth_date" />
      <div class="help-text">
        <p>
          <% $c->user()->date_format_for_display() %>
        </p>
      </div>
    </div>

    <div class="form-item">
      <label class="for-field" for="last_name">Gender:</label>
      <select name="gender">
        <option value="">-- pick a gender --</option>
% for my $value ( @{ R2::Schema::Person->GenderValues() } ) {
        <option value="<% $value %>"><% $value %></option>
% }
      </select>
    </div>

    <div class="form-item">
      <label class="for-field" >Trading is ok?</label>
      <div class="radio-group">
        <input type="radio" class="radio" name="allows_trade" id="allows_trade-yes" value="1" />
        <label class="for-radio" for="allows_trade-yes" id="for-allows_trade-yes">Yes</label>
        <input type="radio" class="radio" name="allows_trade" id="allows_trade-no" value="0" checked="checked" />
        <label class="for-radio" for="allows_trade-no" id="for-allows_trade-no">No</label>
      </div>

      <div class="help-text">
        <p>
          Can this contact be traded to other organizations?
        </p>
      </div>
    </div>

  </fieldset>

  <fieldset>
    <legend>Email & Website</legend>

    <div class="form-item">
      <label class="for-field" for="email_address">Email address:</label>
      <input type="text" class="text medium" name="email_address" id="email_address" />
    </div>

    <div class="form-item">
      <label class="for-field" for="allows_email">Email is ok?</label>

      <div class="radio-group">
        <input type="radio" class="radio" name="allows_email" id="allows_email-yes" value="1" checked="checked" />
        <label class="for-radio" for="allows_email-yes" id="for-allows_email-yes">Yes</label>
        <input type="radio" class="radio" name="allows_email" id="allows_email-no" value="0" />
        <label class="for-radio" for="allows_email-no" id="for-allows_email-no">No</label>
      </div>

      <div class="help-text">
        <p>
          If email is not allowed, this contact will never be emailed by Rapport.
        </p>
      </div>
    </div>

    <div class="form-item">
      <label class="for-field" for="website">Website:</label>
      <input type="text" class="text medium" name="website" id="website" />
    </div>

  </fieldset>

  <fieldset>
    <legend>Phone Numbers</legend>

% for my $num (1..2) {
    <div class="form-item">
      <label class="for-field" for="phone_number-<% $num %>">Phone number:</label>
      <select name="phone_number_type_id-<% $num %>">
%   for my $type (@phone_number_types) {
        <option value="<% $type->phone_number_type_id() %>"><% $type->name() %></option>
%   }
      </select>
      <input type="text" class="text" name="phone_number-<% $num %>" id="phone_number-<% $num %>" />

      <div class="form-item">
        <label class="secondary" for="phone_number_notes-<% $num %>">notes:</label>
        <input type="text" class="text wide" name="phone_number_notes-<% $num %>" id="phone_number_notes-<% $num %>" />
      </div>

      <div class="form-item">
        <div class="no-label">
          <input type="radio" name="is_preferred" value="<% $num %>" checked="checked" id="is_preferred-<% $num %>" />
          <label class="for-radio" for="is_preferred-<% $num %>"
                 id="for-is_preferred-<% $num %>">This is the preferred number</label>
        </div>
      </div>
    </div>
% }
    <a href="#" class="add-another">Add another phone number</a>
  </fieldset>

  <div class="form-item">
    <input class="submit" type="submit" value="Submit" />
  </div>

</form>
</&>
</&>

<%shared>
my $title = 'Add a new person';
</%shared>

<%init>
my @phone_number_types = $c->user()->account()->phone_number_types()->all();
</%init>

<%method title>
<% $title %>
</%method>
