<div id="summary">
  <h1><% $title %></h1>
</div>

<h2><% $account->person_count() %> <% PL_N( 'Person', $account->person_count() ) %></h2>
<h2><% $account->household_count() %> <% PL_N( 'Household', $account->household_count() ) %></h2>
<h2><% $account->organization_count() %> <% PL_N( 'Organization', $account->organization_count() ) %></h2>

<ul>
% while ( my $person = $people->next() ) {
  <li><a href="<% $person->contact()->uri() %>"
         title="View <% $person->full_name() %>"><% $person->full_name() %></a>
  </li>
% }
</ul>

<ul>
% while ( my $household = $households->next() ) {
  <li><a href="<% $household->contact()->uri() %>"
         title="View <% $household->name() %>"><% $household->name() %></a>
  </li>
% }
</ul>

<ul>
% while ( my $organization = $organizations->next() ) {
  <li><a href="<% $organization->contact()->uri() %>"
         title="View <% $organization->name() %>"><% $organization->name() %></a>
  </li>
% }
</ul>

% if ( $c->user()->can_add_contact( account => $account ) ) {
<h2>Add a ...</h2>
<ul>
  <li>
    <a href="<% $c->account()->uri( view => 'new_person_form' ) %>"
       title="Add a new person">Person</a>
  </li>
  <li>
    <a href="<% $c->account()->uri( view => 'new_household_form' ) %>"
       title="Add a new household">Household</a>
  </li>
  <li>
    <a href="<% $c->account()->uri( view => 'new_organization_form' ) %>"
       title="Add a new organization">Organization</a>
  </li>
</ul>
% }

<h2>View all ...</h2>
<ul>
  <li>
    <a href="<% $account->uri( view => 'search/contact' ) %>"
       title="Add a new person">Contacts</a>
  </li>
  <li>
    <a href="<% $account->uri( view => 'search/person' ) %>"
       title="Add a new person">People</a>
  </li>
  <li>
    <a href="<% $account->uri( view => 'search/household' ) %>"
       title="Add a new household">Households</a>
  </li>
  <li>
    <a href="<% $account->uri( view => 'search/organization' ) %>"
       title="Add a new organization">Organizations</a>
  </li>
</ul>

<%shared>
my $title = 'Dashboard: ' . $c->account()->name();
</%shared>

<%init>
my $account = $c->account();

my $people = $account->people();
my $households = $account->households();
my $organizations = $account->organizations();
</%init>

<%method title>
<% $title %>
</%method>
