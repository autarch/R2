<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

  <title>Rapport | <& SELF:title, %ARGS &></title>

  <link rel="stylesheet"
        href="<% static_uri('/css/r2-combined.css') %>"
        type="text/css" />

  <script src="<% static_uri( '/js/r2-combined.js' ) %>"
          type="text/javascript"></script>

</head>
<body>

<& header.mas, %ARGS &>

<div class="yui3-g">
  <div id="content" class="<% $show_side_nav ? 'yui3-u-2-3' : 'yui3-u-1' %>">

<& .messages &>

% $m->call_next();
  </div>
% if ( $m->request_comp()->attr('show_side_nav') ) {
<& side-nav.mas, %ARGS &>
% }
	
</div>

<& footer.mas, %ARGS &>

</body>
</html>

<%attr>
show_side_nav => 1
</%attr>

<%init>
my $show_side_nav = $m->request_comp()->attr('show_side_nav');
</%Init>

<%def .messages>
<div id="messages">
% for my $msg (@messages) {
  <p><% $msg %></p>
% }
</div>
<%init>
my @messages = $c->session_object()->messages();

return unless @messages;
</%init>
</%def>
