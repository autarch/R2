<&| /lib/filter/yui/row.mas &>
<div id="summary">
  <h1>
   Edit <% $account->name() %>
  </h1>
</div>

<&| /lib/filter/form.mas, objects => [ $account ] &>
<form class="JS-standard-form" action="/account" method="post">

  <input type="hidden" name="x-tunneled-method" value="PUT" />

  <fieldset>
    <legend>Account Info</legend>

    <div class="form-item">
      <label class="for-field" for="name">Name:</label>
      <input type="text" class="text wide" name="name" id="name" />
    </div>

    <div class="form-item">
      <label class="for-field" for="default_timezone">Default time zone:</label>
      <select name="default_timezone">
% while ( my $zone = $zones->next() ) {
        <option value="<% $zone->olson_name() %>"><% $zone->description() %></option>
% }
        <option value="UTC">UTC</option>
      </select>
    </div>

% if ( $c->user()->is_system_admin() ) {
    <div class="form-item">
      <label class="for-field" for="domain_id">Domain:</label>
      <select name="domain_id">
%   while ( my $domain = $domains->next() ) {
        <option value="<% $domain->domain_id %>"><% $domain->web_hostname() %></option>
%   }
      </select>
% }

  </fieldset>

  <div class="form-item">
    <input class="submit" type="submit" value="Submit" />
  </div>

</form>
</&>

</&>

<%args>
$account
</%args>

<%init>
my $zones = R2::Schema::TimeZone->ByCountry('us');
my $domains = R2::Schema::Domain->All();
</%init>

<%method title>
Edit <% $m->caller_args(-1)->{account}->name() %>
</%method>
