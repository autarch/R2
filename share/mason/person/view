<& /lib/contact-view/summary.mas, contact => $person &>

<p>
% if ( $person->allows_email() ) {
Is ok with being emailed via Rapport.
% } else {
Does not want to be emailed via Rapport.
% }
</p>

<& /lib/contact-view/email-addresses.mas, contact => $person &>

<& /lib/contact-view/websites.mas, contact => $person &>

<p>
% if ( $person->allows_mail() ) {
Is ok with getting snail mail.
% } else {
Does not want to receive snail mail.
% }
</p>

% if (@addresses) {
<h2><% PL_N( 'Address', scalar @addresses ) %></h2>

%   for my $address (@addresses) {
<& /lib/contact-view/address.mas, address => $address &>
%   }
% }

<p>
% if ( $person->allows_phone() ) {
Is ok with being called.
% } else {
Does not want to receive phone calls.
% }
</p>

% if (@phone_numbers) {
<h2>Phone <% PL_N( 'Number', scalar @phone_numbers ) %></h2>

%   for my $number (@phone_numbers) {
<& /lib/contact-view/phone-number.mas, phone_number => $number &>
%   }
% }

% if ( my $dt = $person->birth_date() ) {
<div>
Birth date: <% $c->user()->format_date($dt) %>
</div>
% }

<%args>
$person
</%args>

<%init>
my @addresses = $person->addresses()->all();

my @phone_numbers = $person->phone_numbers()->all();
</%init>

<%method title>
<% $person->full_name() %>
<%args>
$person
</%args>
</%method>
