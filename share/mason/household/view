<div id="summary" class="<% $image ? 'has-image' : '' %>">
% if ($image ) {
  <img src="<% $image->uri() %>" title="Photo of <% $household->name() %>" id="contact-image" />
% }

  <h1>
   <h1>
     <& SELF:title, %ARGS &>
   </h1>
  </h1>

</div>

<ul>
% while ( my ( $person, $membership ) = $members->next() ) {
  <li><a href="<% $c->uri_for( '/contact/' . $person->contact_id() ) %>"
         title="View <% $person->full_name() %>"
         ><% $person->full_name() %></a>
%   if ( my $pos = $membership->position() ) {
      - <% $pos %>
%   }
  </li>
% }
</ul> 

<p>
% if ( $household->allows_email() ) {
Is ok with being emailed via Rapport.
% } else {
Does not want to be emailed via Rapport.
% }
</p>

% if ( my $email = $household->email_address() ) {
<div>
<a href="mailto:<% $email %>" title="Send mail to <% $household->name() %>"><% $email %></a>
</div>
% }

% if ( my $website = $household->website ) {
<div>
<a href="<% $website %>" title="Website for <% $household->name() %>"><% $website %></a>
</div>
% }

<p>
% if ( $household->allows_mail() ) {
Is ok with getting snail mail.
% } else {
Does not want to receive snail mail.
% }
</p>

% if (@addresses) {
<h2><% PL_N( 'Address', scalar @addresses ) %></h2>

%   for my $address (@addresses) {
<& /lib/contact-view/address.mas, address => $address &>
%   }
% }

<p>
% if ( $household->allows_phone() ) {
Is ok with being called.
% } else {
Does not want to receive phone calls.
% }
</p>

% if (@phone_numbers) {
<h2>Phone <% PL_N( 'Number', scalar @phone_numbers ) %></h2>

%   for my $number (@phone_numbers) {
<& /lib/contact-view/phone-number.mas, phone_number => $number &>
%   }
% }

<%args>
$household
</%args>

<%init>
my $image;
if ( $household->image() )
{
    $image = $household->image()->resize( height => 100, width => 100 );
}

my @addresses = $household->addresses()->all();

my @phone_numbers = $household->phone_numbers()->all();

my $members = $household->members();
</%init>

<%method title>
<% $household->name() %>
<%args>
$household
</%args>
</%method>
